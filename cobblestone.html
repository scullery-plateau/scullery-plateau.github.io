<!DOCTYPE menu>
<html>
  <head>
    <title>Scullery Plateau: Cobblestone</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Caudex"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Modern+Antiqua"
      rel="stylesheet"
    />
    <link href="style/rpg.css" rel="stylesheet" />
    <link href="style/font.css" rel="stylesheet" />
    <link href="style/menu.css" rel="stylesheet" />
    <style type="text/css">
      #canvas {
        min-width: 90%;
        min-height: 80%;
        position: relative;
      }
      #canvas > svg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      .tile {
        border: 2px solid black;
        max-width: 3.5em;
        min-width: 3.5em;
      }
      .selected-tile {
        border: 4px solid white;
      }
      .active-tile {
        border: 4px solid green;
      }
      .inactive-tile {
        border: 4px solid red;
      }
      #tileSet {
        overflow-x: scroll;
      }
      #orientationPicker a {
      }
      #orientationPicker a.disabled,
      #orientationPicker a:disabled {
        color: darkgrey !important;
      }
    </style>
    <script type="text/javascript" src="scripts/cobblestone.js"></script>
    <script type="text/javascript" src="scripts/fileload.js"></script>
    <script type="text/javascript" src="scripts/menues.js"></script>
    <script type="text/javascript" src="scripts/popup.js"></script>
    <script type="text/javascript" src="scripts/template.js"></script>
  </head>
  <body
    class="bg-dark text-light"
    onload="initCobblestone(
    'tileSet',
    'canvas',
    'tileImageDefs',
    'fileLoad',
    'imageLoad',
    'about',
    'imageDownload',
    'imageScale',
    'htmlcanvas',
    'imageFileName',
    'imageLink',
    'imageDisplay',
  )"
  >
    <svg width="0%" height="0%">
      <defs>
        <linearGradient
          id="clearedGradient"
          x1="0%"
          y1="0%"
          x2="100%"
          y2="100%"
        >
          <stop offset="5%" style="stop-color: #ff0000; stop-opacity: 0.2" />
          <stop offset="23%" style="stop-color: #ffff00; stop-opacity: 0.2" />
          <stop offset="41%" style="stop-color: #00ff00; stop-opacity: 0.2" />
          <stop offset="59%" style="stop-color: #00ffff; stop-opacity: 0.2" />
          <stop offset="77%" style="stop-color: #0000ff; stop-opacity: 0.2" />
          <stop offset="95%" style="stop-color: #ff00ff; stop-opacity: 0.2" />
        </linearGradient>
        <rect
          id="emptyCell"
          width="30"
          height="30"
          fill="url(#clearedGradient)"
        />
      </defs>
    </svg>
    <span id="tileImageDefs" style="display: none"></span>
    <div class="container">
      <div class="navbar justify-content-start">
        <div class="mr-3">
          <ul class="navbar-nav">
            <li class="nav-item active drowpdown">
              <a
                href="#"
                class="rpg-box p-3 text-light nav-link dropdown-toggle"
                onclick="toggleMenu(event,this)"
              ></a>
              <ul class="dropdown-menu rpg-box">
                <li class="dropdown-submenu">
                  <a
                    href="#"
                    class="dropdown-item dropdown-toggle"
                    onclick="toggleMenu(event,this)"
                    >File</a
                  >
                  <ul class="dropdown-menu rpg-box">
                    <li class="">
                      <a
                        href="#"
                        class="dropdown-item"
                        onclick="loadFile(event)"
                        >Load File</a
                      >
                    </li>
                    <li class="">
                      <a
                        href="#"
                        class="dropdown-item"
                        onclick="downloadFile(event)"
                        >Download File</a
                      >
                    </li>
                    <li class="">
                      <a
                        href="#"
                        class="dropdown-item"
                        onclick="showImageDownload(event)"
                        >Download Image</a
                      >
                    </li>
                    <li class="">
                      <a
                        href="#"
                        class="dropdown-item"
                        onclick="showPrintable(event)"
                        >Publish Printable</a
                      >
                    </li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a
                    href="#"
                    class="dropdown-item dropdown-toggle"
                    onclick="toggleMenu(event,this)"
                    >Tiles</a
                  >
                  <ul class="dropdown-menu rpg-box">
                    <li class="">
                      <a
                        href="#"
                        class="dropdown-item"
                        onclick="addImage(event)"
                        >Add Image</a
                      >
                    </li>
                    <li class="">
                      <a
                        href="#"
                        class="dropdown-item"
                        onclick="showTileTransform(event)"
                        >Transform Tile</a
                      >
                    </li>
                    <li class="">
                      <a
                        href="#"
                        class="dropdown-item"
                        onclick="removeTile(event)"
                        >Remove Selected Tile</a
                      >
                    </li>
                    <li class="dropdown-submenu">
                      <a
                        href="#"
                        class="dropdown-item dropdown-toggle"
                        onclick="toggleMenu(event,this)"
                        >Orientation</a
                      >
                      <ul class="dropdown-menu rpg-box" id="orientationPicker">
                        <li class="">
                          <a
                            id="orientation-portrait"
                            href="#"
                            class="dropdown-item disabled"
                            disabled
                            onclick="setOrientation('portrait',event)"
                            >Portrait</a
                          >
                        </li>
                        <li class="">
                          <a
                            id="orientation-landscape"
                            href="#"
                            class="dropdown-item"
                            onclick="setOrientation('landscape',event)"
                            >Landscape</a
                          >
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li class="">
                  <a href="#" class="dropdown-item" onclick="showAbout(event)"
                    >About</a
                  >
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <a href="index.html" class="navbar-brand text-light"
          >Scullery Plateau:</a
        >
        <span class="navbar-brand">Cobblestone</span>
      </div>
      <div
        class="rpg-title-box m-3 d-flex justify-content-between"
        title="Palette"
      >
        <button class="btn btn-success" title="Add Image" onclick="addImage()">
          +
        </button>
        <div id="tileSet" class="ml-2 mr-2 w-100 d-flex flex-nowrap"></div>
        <button
          class="btn btn-danger"
          title="Remove Selected Tile"
          onclick="removeTile()"
        >
          X
        </button>
      </div>
      <div
        id="canvas"
        class="rpg-title-box m-3"
        title="click to place a tile"
      ></div>
    </div>
    <footer>
      <div class="jumbotronn text-center">
        <p>Built by Daniel Allen Johnson &#169; 2019 - 2022</p>
        <p>See the code on GitHub.</p>
      </div>
    </footer>
    <div style="display: none">
      <input
        id="fileLoad"
        type="file"
        accept=".json,application/json"
        onchange="loadFiles(event)"
      />
      <input
        id="imageLoad"
        type="file"
        accept=".png,image/png,.jpg,image/jpg"
        onchange="loadImages(event)"
      />
      <div id="about">
        <p>Cobblestone is a map-building tool.</p>
        <p>
          Build your map a page at a time. Publish them as printable or download
          them as images.
        </p>
        <p>
          Import images as tiles, flip or rotate them to your desired
          orientation, and arrange them as you wish.
        </p>
      </div>
      <div id="imageDownload">
        <div>
          <div id="imageDisplay" style="display: none">
            <canvas
              id="htmlcanvas"
              width="${imgDim}"
              height="${imgDim}"
            ></canvas>
          </div>
          <div class="form-group">
            <label for="imageFileName">File Name:</label>
            <input
              type="text"
              class="form-control"
              id="imageFileName"
              placeholder="cobblestone"
              onchange="repaintImage()"
            />
          </div>
          <div class="form-group">
            <label for="imageScale">Image Scale:</label>
            <input
              type="number"
              value="5"
              min="1"
              class="form-control"
              id="imageScale"
              onchange="repaintImage()"
            />
          </div>
          <p>Click on the image to download.</p>
          <div id="imageLink">
            <a
              href="${dataURL}"
              title="click image to download"
              download="${filename}"
            >
              <img
                src="${dataURL}"
                style="width: ${imgDim}; height: ${imgDim};"
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
