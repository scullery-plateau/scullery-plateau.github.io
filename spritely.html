<!DOCTYPE menu>
<html>
  <head>
    <title>Scullery Plateau: Spritely</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Caudex"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Modern+Antiqua"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style/rpg.css" />
    <link rel="stylesheet" href="style/font.css" />
    <link rel="stylesheet" href="style/menu.css" />
    <style type="text/css">
      .w7em {
        min-width: 10em;
      }
      .w10em {
        min-width: 12em;
      }
      .w12em {
        min-width: 14em;
      }
      #canvas {
        min-width: 90%;
        min-height: 80%;
        position: relative;
      }
      #canvas > svg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      .palette-color {
        border: 2px solid black;
      }
      .selected-color {
        border: 4px solid white;
      }
    </style>
    <script type="text/javascript" src="scripts/colorPicker.js"></script>
    <script type="text/javascript" src="scripts/colors.js"></script>
    <script type="text/javascript" src="scripts/download.js"></script>
    <script type="text/javascript" src="scripts/fileload.js"></script>
    <script type="text/javascript" src="scripts/menues.js"></script>
    <script type="text/javascript" src="scripts/popup.js"></script>
    <script type="text/javascript" src="scripts/spritely.js"></script>
    <script type="text/javascript" src="scripts/triggers.js"></script>
  </head>
  <body
    class="bg-dark text-light"
    onload="init(
      'clearedPixel',
      'backgroundColor',
      'makeTransparent',
      'palette',
      'paletteDefs',
      'paletteColor',
      'canvas',
      'about',
      'imageDownload',
      'imageScale','htmlcanvas','imageFileName','imageLink','imageDisplay','fileLoad',
      'colorPicker','hexColor','hexPaletteTable','colorByName'
      )"
    onclick="closeStrayMenu(event)"
  >
    <div class="navbar justify-content-start">
      <div class="mr-3">
        <ul class="navbar-nav">
          <li class="nav-item active drowpdown">
            <a
              href="#"
              class="rpg-box p-3 text-light nav-link dropdown-toggle"
              onclick="toggleMenu(event,this)"
            ></a>
            <ul class="dropdown-menu rpg-box">
              <li class="dropdown-submenu">
                <a
                  href="#"
                  class="dropdown-item dropdown-toggle"
                  onclick="toggleMenu(event,this)"
                  >File</a
                >
                <ul class="dropdown-menu rpg-box">
                  <li class="">
                    <a href="#" class="dropdown-item" onclick="loadFile(event)"
                      >Load File</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="downloadFile(event)"
                      >Download File</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="showImageDownload(event)"
                      >Download Image</a
                    >
                  </li>
                </ul>
              </li>
              <li class="dropdown-submenu">
                <a
                  href="#"
                  class="dropdown-item dropdown-toggle"
                  onclick="toggleMenu(event,this)"
                  >Palette</a
                >
                <ul class="dropdown-menu rpg-box">
                  <li class="">
                    <a href="#" class="dropdown-item" onclick="addColor(event)"
                      >Add Color</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="removeColor(event)"
                      >Remove Color</a
                    >
                  </li>
                  <li class="">
                    <label for="backgroundColor" class="dropdown-item"
                      >Background Color:
                      <button
                        class="rounded-pill"
                        id="backgroundColor"
                        onclick="setBackgroundColor(this)"
                      >
                        ____
                      </button></label
                    >
                  </li>
                  <li class="">
                    <label for="makeTransparent" class="dropdown-item"
                      >Make Transparent?
                      <input
                        id="makeTransparent"
                        type="checkbox"
                        checked
                        onchange="makeTransparent(this)"
                    /></label>
                  </li>
                </ul>
              </li>
              <li class="dropdown-submenu">
                <a
                  href="#"
                  class="dropdown-item dropdown-toggle"
                  onclick="toggleMenu(event,this)"
                  >Transform</a
                >
                <ul class="dropdown-menu rpg-box">
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="transform(event,'turnLeft')"
                      >Turn Left</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="transform(event,'turnRight')"
                      >Turn Right</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="transform(event,'flipOver')"
                      >Flip Over</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="transform(event,'flipDown')"
                      >Flip Down</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="transform(event,'shiftLeft')"
                      >Shift Left</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="transform(event,'shiftRight')"
                      >Shift Right</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="transform(event,'shiftUp')"
                      >Shift Up</a
                    >
                  </li>
                  <li class="">
                    <a
                      href="#"
                      class="dropdown-item"
                      onclick="transform(event,'shiftDown')"
                      >Shift Down</a
                    >
                  </li>
                </ul>
              </li>
              <li class="">
                <a href="#" class="dropdown-item" onclick="showAbout(event)"
                  >About</a
                >
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <a href="index.html" class="navbar-brand text-light">Scullery Plateau:</a>
      <span class="navbar-brand">Spritely</span>
    </div>
    <svg width="0%" height="0%">
      <defs>
        <linearGradient
          id="clearedGradient"
          x1="0%"
          y1="0%"
          x2="100%"
          y2="100%"
        >
          <stop offset="5%" style="stop-color: #ff0000; stop-opacity: 0.2" />
          <stop offset="23%" style="stop-color: #ffff00; stop-opacity: 0.2" />
          <stop offset="41%" style="stop-color: #00ff00; stop-opacity: 0.2" />
          <stop offset="59%" style="stop-color: #00ffff; stop-opacity: 0.2" />
          <stop offset="77%" style="stop-color: #0000ff; stop-opacity: 0.2" />
          <stop offset="95%" style="stop-color: #ff00ff; stop-opacity: 0.2" />
        </linearGradient>
        <rect
          id="clearedPixel"
          width="10"
          height="10"
          stroke-width="1"
          stroke="black"
          fill="url(#clearedGradient)"
        />
      </defs>
    </svg>
    <div
      class="rpg-title-box m-3 d-flex justify-content-between"
      title="Palette"
    >
      <button class="btn btn-success" title="Add Color" onclick="addColor()">
        +
      </button>
      <div id="palette"></div>
      <button
        class="btn btn-danger"
        title="Remove Selected Color"
        onclick="removeColor()"
      >
        X
      </button>
    </div>
    <div
      id="canvas"
      class="rpg-title-box m-3"
      title="click to paint a pixel"
    ></div>
    <div style="display: none">
      <div id="paletteDefs"></div>
      <input
        id="fileLoad"
        type="file"
        accept=".json,application/json"
        onchange="loadFiles(event)"
      />
      <input id="paletteColor" type="color" />
      <div id="about">
        <p>Spritely is a canvas for pixel art.</p>
        <p>
          Build your palette below, then select a color in the palette to paint
          pixels that color, or to unpaint pixels already that color.
        </p>
        <p>
          Changing the color of a slot in the palette will change the color of
          all matching pixels.
        </p>
        <p>Deleting a color will unpaint all pixels that matching color.</p>
        <p>Unpainting pixels will return them to the background color.</p>
      </div>
      <div id="imageDownload">
        <div>
          <div id="imageDisplay" style="display: none">
            <canvas
              id="htmlcanvas"
              width="${imgDim}"
              height="${imgDim}"
            ></canvas>
          </div>
          <div class="form-group">
            <label for="imageFileName">File Name:</label>
            <input type="text" class="form-control" id="imageFileName" />
          </div>
          <div class="form-group">
            <label for="imageScale">Image Scale:</label>
            <input
              type="number"
              value="5"
              min="1"
              class="form-control"
              id="imageScale"
              onchange="repaintImage()"
            />
          </div>
          <div id="imageLink">
            <a
              href="${dataURL}"
              title="click image to download"
              download="${filename}"
            >
              <img
                src="${dataURL}"
                style="width: ${imgDim}; height: ${imgDim};"
              />
            </a>
          </div>
        </div>
      </div>
      <div id="colorPicker">
        <div class="d-flex justify-content-center">
          <div class="d-flex flex-column">
            <div class="d-flex justify-content-center">
              <div class="form-group">
                <label for="hexColor">Color Hexcode:</label>
                <input
                  type="text"
                  class="form-control-lg"
                  id="hexColor"
                  onchange="setRGB(this.value)"
                />
              </div>
            </div>
            <div id="hexPaletteTable"></div>
            <div class="d-flex justify-content-center">
              <div class="form-group">
                <label for="colorByName">Color by Name</label>
                <select
                  id="colorByName"
                  class="form-control-lg"
                  onchange="setRGB(this.options[this.selectedIndex].value)"
                ></select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="jumbotronn text-center">
        <p>Built by Daniel Allen Johnson &#169; 2019 - 2022</p>
        <p>See the code on GitHub.</p>
      </div>
    </footer>
  </body>
</html>
